/**
 * Shareprints Gallery
 *
 * @package   Shareprints
 * @author    JR w/Freak Plugins <jr@freakplugins.com>
 * @license   GPLv3+
 * @link      http://freakplugins.com
 * @copyright Copyright (c) 2014 Freak Plugins, LLC - All Rights Reserved
 */$j=jQuery.noConflict();$j(function(){var e=!1;"ontouchstart"in window&&(e=!0);var t=$j(".shareprints_gallery.squares").add(".shareprints_gallery.sp_masonry");t.length&&$j.each(t,function(e){var n=t.eq(e),r=n.data("gallery"),i=n.find(".shareprints");i.imagesLoaded(function(){i.addClass("visible").sp_masonry({isFitWidth:!0,itemSelector:".shareprints_li",gutter:parseInt(r.image_padding),columnWidth:parseInt(r.width)});n.hasClass("sp_masonry")&&$j(window).resize(function(){var e=i.data("timer");e&&clearTimeout(e);i.data("timer",setTimeout(function(){i.sp_masonry()},500))})})});var n=$j(".shareprints_gallery.slider");if(n.length){function r(e,t,n){var r=e.parent().outerWidth();e.data("tsize","small");t==="xlarge"&&(r>=n.xlarge?e.removeClass("large medium small").data("tsize","xlarge"):r>=n.large?e.removeClass("medium small").addClass("large").data("tsize","large"):r>=n.medium?e.removeClass("large small").addClass("medium").data("tsize","medium"):e.removeClass("large medium").addClass("small"));t==="large"&&(r>=n.large?e.removeClass("medium small").data("tsize","large"):r>=n.medium?e.removeClass("small").addClass("medium").data("tsize","medium"):e.removeClass("medium").addClass("small"));t==="medium"&&(r>=n.medium?e.removeClass("small").data("tsize","medium"):e.addClass("small"))}n.each(function(t){var n=$j(this),i=n.data("gallery"),s=n.children(".shareprints_flexslider"),o=n.children(".shareprints_thumbnav"),u=i.image_size,a=i.width;e&&n.addClass("touch");r(n,u,a);s.imagesLoaded(function(){o.length&&o.shareprints_flexslider({animation:"slide",selector:".slides > div",controlNav:!1,directionNav:e?!1:!0,animationLoop:!1,slideshow:!1,useCSS:!0,keyboard:!1,animationSpeed:500,itemWidth:i.thumb_size[n.data("tsize")],itemMargin:i.image_padding,asNavFor:s,start:function(e){o.addClass("visible");o=e}});s.shareprints_flexslider({selector:".shareprints > .shareprints_li",animation:"slide",directionNav:e?!1:!0,controlNav:!1,animationLoop:!1,slideshow:!1,useCSS:!0,smoothHeight:!0,multipleKeyboard:e?!1:!0,animationSpeed:500,sync:o,start:function(e){s.addClass("visible").removeAttr("style");s=e}})});$j(window).resize(function(){r(n,u,a);o.length&&(o.vars.itemWidth=i.thumb_size[n.data("tsize")]);s.rsize()})})}var i=$j(".shareprints_gallery.filmstrip");i.length&&$j.each(i,function(t){var n=i.eq(t),r=n.data("gallery"),s=n.children(".shareprints_flexslider"),o=n.outerWidth(),u=o,a=s.children(".sizer"),f=(a.data("height")/a.data("width")*100).toFixed(2)+"%",l=s.find("#image_"+a.data("id")+" .image_"+a.data("id"));s.find(".shareprints_thumb").css({"padding-bottom":f});s.imagesLoaded(function(){s.shareprints_flexslider({selector:".shareprints > .shareprints_li",animation:"slide",controlNav:!1,directionNav:e?!1:!0,animationLoop:!1,slideshow:!1,itemWidth:r.width,itemMargin:o<521&&r.width>320?r.image_padding/2:r.image_padding,multipleKeyboard:e?!1:!0,start:function(e){a.remove();s.addClass("visible");s=e}});$j(window).resize(function(){s.vars.itemMargin=n.outerWidth()<521&&r.width>320?r.image_padding/2:r.image_padding;s.flexAnimate(0);s.rsize()})})});var s=$j(".shareprints_gallery.slidescroll");s.length&&$j.each(s,function(t){function h(){a.slider("value",r.scrollLeft())}function p(e){var t=Math.max(40,Math.round(i/e*i)),n=t*.5;a.css({margin:"0 "+n+"px"}).children().css({"margin-left":"-"+n+"px",width:t+"px"});f.width(n)}function d(e){function p(i){t=Number(new Date);n=i.touches[0].pageX;s=i.touches[0].pageY;o=n;u=s;c=r.scrollLeft();i.preventDefault();e.addEventListener("touchmove",d,!1);e.addEventListener("touchend",v,!1)}function d(e){n=e.touches[0].pageX;s=e.touches[0].pageY;f=o-n;l=Math.abs(f)<Math.abs(s-u);if(!l||Number(new Date)-t>h){e.preventDefault();f=f/i*r.get(0).scrollWidth;r.scrollLeft(c-f)}}function v(t){e.removeEventListener("touchmove",d,!1);e.removeEventListener("touchend",v,!1);c=null;o=null;u=null;f=null}var t,n,s,o,u,f,l,c,h=500;a.addClass("touch");e.addEventListener("touchstart",p,!1)}var n=s.eq(t),r=n.find(".shareprints"),i=n.outerWidth(),o=i,u=n.find(".sizer"),a=n.find(".sp_ui_slider"),f=a.siblings("span"),l=r.find("#image_"+u.data("id")+" img"),c=r.find("img").not(l);r.css({"margin-bottom":"-"+(r.get(0).offsetHeight-r.get(0).clientHeight)+"px"});f.click(function(){$j(this).hasClass("sp_ui_slider_start")?r.scrollLeft(0):r.scrollLeft(r.get(0).scrollWidth)});r.imagesLoaded(function(){c.css({"max-height":l.height()+"px"});a.slider({animate:!1,max:r.get(0).scrollWidth-i,min:0,value:0,orientation:"horizontal",create:function(t,n){r.on("scroll",h);p(r.get(0).scrollWidth);e&&d(a.children().get(0))},start:function(e,t){r.off("scroll",h)},slide:function(e,t){r.scrollLeft(t.value)},stop:function(e,t){r.on("scroll",h)}});n.addClass("visible");$j(window).resize(function(){var e=n.data("timer");e&&clearTimeout(e);n.data("timer",setTimeout(function(){i=n.outerWidth();c.css({"max-height":l.height()+"px"});p(r.get(0).scrollWidth);a.slider("option","max",r.get(0).scrollWidth-i)},100))})})});$j(document).on("contextmenu",".shareprints_thumb",function(e){e.preventDefault()})});